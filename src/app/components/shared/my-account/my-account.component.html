<div id="wrapper">
  <app-page-header></app-page-header>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.1/css/all.css" integrity="sha384-O8whS3fhG2OnA5Kas0Y9l3cfpmYjapjI0E4theH4iuMD+pLhbf6JI0jIMfYcK3yZ" crossorigin="anonymous">
  <div class="container_myacc">

    <div class="container-account">
        <div class="container-logout">
            <h2>My Account</h2>
            <p>Here you can edit your account`s informations, courses you started and the progress for each one.<br>Contact us at contact@alexteachme.com, if you need any help.</p>

            <!--<input type="submit" name="logout" id="logout" value="Log Out">-->
            <button type="button" (click)="onLogOut()" id="logout">LOG OUT</button>
        </div>
    </div>
    <!--Account info-->
    <div class="container-info">
        <h2>Account Informations</h2>
        <div class="container-profile-picture">
                <div class="button" ngf-select ng-model="file" name="file" ngf-pattern="'image/*'"
                    ngf-accept="'image/*'" ngf-max-size="15MB" ngf-min-height="100"
                    ngf-resize="{width: 100, height: 100}">
                    <img src="assets/default.jpg" alt="" width="140" height="140" class="img-profile">
                
                    
                        <input
                        style="display: none;"
                        type="file"
                        (change)="onFileSelected($event)"
                        name="upload-file"
                        class="upload-file"
                        #fileInput>
                        <button type="button" (click)='fileInput.click()' class="upload-file">Upload file</button>
                </div>
        </div>
        <!-- <div class="container-profile-picture">
                <img *ngIf="url" width=300 height=300 src="{{url}}" />
                <label *ngIf="editmode" for="uploader-input" ng2FileDrop [ngClass]="{'drag-over': hasDragOver}" (fileOver)="fileOver($event)" [uploader]="uploader">
                  <div class="infotext"><span *ngIf="!url" >Drop your picture<br>or click to upload</span></div>
                </label>
                <input *ngIf="editmode" type="file" ng2FileSelect [uploader]="uploader" id="uploader-input" style="display:none" />
        </div> -->


        <div class="container-user-save-change">
                    <div class="info-change-profile-picture">
                        To quickly change your profile picture, just drag&drop an image or upload a file. <br>Image selected, should have maximum 15 MB size.
                    </div>
                    <!-- Update user & password & email -->
                    <div class="username">
                        <input type="text" name="username" id="username" [(ngModel)]="user.name">
                    </div>

                    <div class="password">
                    <input *ngIf="!showPassword" type="password" name="password" id="password" [(ngModel)]="user.password">
                    <input *ngIf="showPassword" type="text" name="password" id="password" [(ngModel)]="user.password">
                    <button (click)="toggleShowPassword()"
                                class="showPassword"><i
                                class="fa"
                                class="fa {{ showPassword ? 'fa-eye' : 'fa-eye-slash'}}"></i> </button>
                    </div>

                    <div class="email">
                        <input type="text" name="email" id="email" [(ngModel)]="user.email">
                    </div>
                    <!--Update Button -->
                    <div class="save">
                        <button type="button" name="save" id="save" (click) = "updateUserProfile()">Save</button>
                    </div>
                    <!--Reset datas to the old one-->
                    <div class="cancel">
                        <button type="button" name="cancel" id="cancel" (click)="getUserProfile(user.name);
                                                                                getUserProfile(user.password);
                                                                        getUserProfile(user.email)">Cancel</button>
                    </div>
            
        <!--Courses started-->
      </div>
             <hr class="line">


             <h2 class="container-head-courses">Started Courses</h2>

        <div class="container-started-courses" *ngFor="let item of courses;let i = index" [hidden] = 'item.points<= 0'>
            
            <div class="container-course-progress">
                <button type="button" (click) = "updateCourseProgress(item)" name="cancel-cours" class="cancel-cours">x</button>
                    <div class="container-redirect-to-courses" routerLink="/courses">
                        
                        <img src={{item.images}} alt="" width="100" height="100">
                        
                        
                            <p class="small-description">{{item.small_description}}</p>
                            <p class="long-description">{{item.long_description}}</p>
                        <div class="progress-bar" role="progressbar "
                            aria-valuemin="0" aria-valuemax="150" [ngStyle]="{'width' : item.points / 150 * 100 + '%' }" >
                        </div>
                    </div>
                    <div class="container-progress-points">
                        <p class="container-points-nr">{{item.points}}</p>
                        <p class="container-points">points</p>
                    </div>
                        
            </div>
        </div>

    </div>
  </div>
  <app-footer></app-footer>
</div>

